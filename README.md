# üïµÔ∏è Mayoku (Telegram Mini App 2025)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è, –≤–∏–∑—É–∞–ª—å–Ω–æ –±–æ–≥–∞—Ç–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∏–≥—Ä—ã "–®–ø–∏–æ–Ω" –¥–ª—è Telegram Mini Apps.
**–ö–ª—é—á–µ–≤—ã–µ —Ñ–∏—á–∏:** Real-time –≥–µ–π–º–ø–ª–µ–π, –∫—Ä–∞—Å–∏–≤—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (UGC) –∏ –º–µ—Ö–∞–Ω–∏–∫–∞ "–®–µ—Ä–∏—Ñ" (–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ).

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üë§ –ò–≥—Ä–æ–∫
*   **Auth:** –ë–µ—Å—à–æ–≤–Ω—ã–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram `initData`.
*   **Lobby:** –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç, –∏–Ω–≤–∞–π—Ç –¥—Ä—É–∑–µ–π –ø–æ —Å—Å—ã–ª–∫–µ.
*   **Gameplay:**
    *   –û–±—â–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä.
    *   –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –∞—Ä—Ç–∞–º–∏ –ª–æ–∫–∞—Ü–∏–π (–≤–º–µ—Å—Ç–æ —Å—É—Ö–æ–≥–æ —Ç–µ–∫—Å—Ç–∞).
    *   –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞.
*   **Profile:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–±–µ–¥/–ø–æ—Ä–∞–∂–µ–Ω–∏–π, –∏—Å—Ç–æ—Ä–∏—è –º–∞—Ç—á–µ–π.

### üé® –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (UGC)
*   –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –ª–æ–∫–∞—Ü–∏–π (Decks).
*   –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –ª–æ–∫–∞—Ü–∏–π (—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ MinIO).
*   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –ª–æ–∫–∞—Ü–∏–∏.
*   –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞–±–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –º–æ–¥–µ—Ä–∞—Ü–∏—é).

### üõ°Ô∏è –ê–¥–º–∏–Ω
*   –ú–æ–¥–µ—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞–±–æ—Ä–æ–≤.
*   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–ª–æ–±–∞–º–∏.

---

## üéÆ Game Rules & Logic (Ruleset)

### –†–æ–ª–∏
1.  **–ú–µ—Å—Ç–Ω—ã–π (Local):** –í–∏–¥–∏—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É –ª–æ–∫–∞—Ü–∏–∏ –∏ —Å–≤–æ—é —Ä–æ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–õ–æ–∫–∞—Ü–∏—è: –ö–∞–∑–∏–Ω–æ, –†–æ–ª—å: –ö—Ä—É–ø—å–µ").
2.  **–®–ø–∏–æ–Ω (Spy):** –ù–ï –≤–∏–¥–∏—Ç –ª–æ–∫–∞—Ü–∏—é. –í–∏–¥–∏—Ç —Å—Ç–∞—Ç—É—Å "–¢—ã –®–ø–∏–æ–Ω". –ó–∞–¥–∞—á–∞: –ø–æ–Ω—è—Ç—å, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –æ—Å—Ç–∞–ª—å–Ω—ã–µ, –∏–ª–∏ –Ω–µ —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–µ–±—è –¥–æ –∫–æ–Ω—Ü–∞ —Ç–∞–π–º–µ—Ä–∞.

### –£—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã
*   **–ü–æ–±–µ–¥–∞ –ú–µ—Å—Ç–Ω—ã—Ö:**
    1.  –ï–¥–∏–Ω–æ–≥–ª–∞—Å–Ω–æ (–º–∏–Ω—É—Å –æ–¥–∏–Ω –≥–æ–ª–æ—Å –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º–æ–≥–æ) –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –®–ø–∏–æ–Ω–∞ –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã.
    2.  –®–ø–∏–æ–Ω –ø–æ–ø—ã—Ç–∞–ª—Å—è —É–≥–∞–¥–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é –∏ –æ—à–∏–±—Å—è.
*   **–ü–æ–±–µ–¥–∞ –®–ø–∏–æ–Ω–∞:**
    1.  –¢–∞–π–º–µ—Ä –∏—Å—Ç–µ–∫, –∏ –®–ø–∏–æ–Ω–∞ –Ω–µ —Ä–∞—Å–∫—Ä—ã–ª–∏.
    2.  –®–ø–∏–æ–Ω –æ—Å—Ç–∞–Ω–æ–≤–∏–ª –∏–≥—Ä—É –∏ –≤–µ—Ä–Ω–æ –Ω–∞–∑–≤–∞–ª –ª–æ–∫–∞—Ü–∏—é (–≤—ã–±—Ä–∞–ª –∏–∑ —Å–ø–∏—Å–∫–∞).
    3.  –ú–µ—Å—Ç–Ω—ã–µ –≤—ã–≥–Ω–∞–ª–∏ (–ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–∏) –ø—Ä–æ—Ç–∏–≤ –º–∏—Ä–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞.

### –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
1.  **Start:** –†–∞–∑–¥–∞—á–∞ —Ä–æ–ª–µ–π. –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ (–æ–±—ã—á–Ω–æ 1 –º–∏–Ω –Ω–∞ –∏–≥—Ä–æ–∫–∞).
2.  **Process:** –ò–≥—Ä–æ–∫–∏ –∑–∞–¥–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏.
3.  **Action:** –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å "–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ".
4.  **Voting:**
    *   –ï—Å–ª–∏ –í–°–ï (–∫—Ä–æ–º–µ –æ–±–≤–∏–Ω—è–µ–º–æ–≥–æ) –≥–æ–ª–æ—Å—É—é—Ç "–ó–∞" ‚Äî –∏–≥—Ä–∞ —Å—Ç–æ–ø. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏.
    *   –ï—Å–ª–∏ —Ö–æ—Ç—å –æ–¥–∏–Ω "–ü—Ä–æ—Ç–∏–≤" ‚Äî –∏–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è.
5.  **Spy Guess:** –®–ø–∏–æ–Ω –º–æ–∂–µ—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –Ω–∞–∂–∞—Ç—å "–£–≥–∞–¥–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é". –ò–≥—Ä–∞ —Å—Ç–æ–ø–∞–µ—Ç—Å—è. –ï—Å–ª–∏ —É–≥–∞–¥–∞–ª ‚Äî –ø–æ–±–µ–¥–∞ –®–ø–∏–æ–Ω–∞. –ù–µ—Ç ‚Äî –ø–æ–±–µ–¥–∞ –ú–µ—Å—Ç–Ω—ã—Ö.

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
*   –ú–∏–Ω. –∏–≥—Ä–æ–∫–æ–≤: 3.
*   –ú–∞–∫—Å. –∏–≥—Ä–æ–∫–æ–≤: 10 (–ø–æ –¥–µ—Ñ–æ–ª—Ç—É).
*   –ö–æ–ª-–≤–æ —à–ø–∏–æ–Ω–æ–≤: 1 –∏–ª–∏ 2 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è).

---

## üß© Meta Game & Features (Detailed)
### 1. –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (Profile)
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å.

 - **Smart Stats:**
    - –û–±—â–∏–π –í–∏–Ω—Ä–µ–π—Ç (%).
    - –í–∏–Ω—Ä–µ–π—Ç –∑–∞ –®–ø–∏–æ–Ω–∞ vs –í–∏–Ω—Ä–µ–π—Ç –∑–∞ –ú–µ—Å—Ç–Ω–æ–≥–æ (—á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –≤ —á–µ–º —Ç—ã —Å–∏–ª–µ–Ω).
    - "–õ—é–±–∏–º–∞—è —Ä–æ–ª—å" (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏).
 - **Match History:** –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 20 –∏–≥—Ä.
    - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞: –õ–æ–∫–∞—Ü–∏—è | –†–æ–ª—å | –†–µ–∑—É–ª—å—Ç–∞—Ç (–ü–æ–±–µ–¥–∞/–ü–æ—Ä–∞–∂–µ–Ω–∏–µ) | –î–∞—Ç–∞.
    - –î–µ—Ç–∞–ª–∏ (–ø–æ –∫–ª–∏–∫—É): –ö—Ç–æ –±—ã–ª —à–ø–∏–æ–Ω–æ–º –≤ —Ç–æ–π –∏–≥—Ä–µ.
## 2. UGC –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (Deck Builder)
–ö–∏–ª–ª–µ—Ä-—Ñ–∏—á–∞ –ø—Ä–æ–µ–∫—Ç–∞.

 - **Flow —Å–æ–∑–¥–∞–Ω–∏—è:**
    1. –Æ–∑–µ—Ä —Å–æ–∑–¥–∞–µ—Ç "–ü–∞–∫–µ—Ç" (–ù–∞–∑–≤–∞–Ω–∏–µ, –û–±–ª–æ–∂–∫–∞).
    2. –î–æ–±–∞–≤–ª—è–µ—Ç –ª–æ–∫–∞—Ü–∏–∏ (–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ, –ø–∏—à–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ).
    3. –î–ª—è –∫–∞–∂–¥–æ–π –ª–æ–∫–∞—Ü–∏–∏ –ø–∏—à–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π (–º–∏–Ω–∏–º—É–º 6, –º–∞–∫—Å–∏–º—É–º 20).
    4. –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫" (Draft).
    5. –ö–Ω–æ–ø–∫–∞ "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å" -> –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ Pending.
 - **–ú–æ–¥–µ—Ä–∞—Ü–∏—è:**
    - –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–∏–ª–∏ –≤–∏–¥–∏—Ç –≤ –∞–¥–º–∏–Ω–∫–µ).
    - –ï—Å–ª–∏ –û–ö -> –°—Ç–∞—Ç—É—Å Approved (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ø—É–±–ª–∏—á–Ω–æ–º –ø–æ–∏—Å–∫–µ).
    - –ï—Å–ª–∏ –æ—Ç–∫–∞–∑ -> –°—Ç–∞—Ç—É—Å Rejected (–∞–≤—Ç–æ—Ä –≤–∏–¥–∏—Ç –ø—Ä–∏—á–∏–Ω—É, –º–æ–∂–µ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å).
## 3. –õ–æ–±–±–∏ –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∏
–°–æ–∑–¥–∞—Ç–µ–ª—å –∫–æ–º–Ω–∞—Ç—ã –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å.

 - **–í—ã–±–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è:**
    - "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞–±–æ—Ä—ã" (–æ—Ç –∫–æ–º–∞–Ω–¥—ã Mayoku).
    - "–ú–æ–∏ –Ω–∞–±–æ—Ä—ã" (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ –º–Ω–æ–π).
    - "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ" (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º—å—é–Ω–∏—Ç–∏, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É/–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è–º).
 - **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
    - –í—Ä–µ–º—è –Ω–∞ —Ä–∞—É–Ω–¥: 3 - 15 –º–∏–Ω—É—Ç.
    - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–ø–∏–æ–Ω–æ–≤: 1, 2 –∏–ª–∏ "–ê–≤—Ç–æ" (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª-–≤–∞ –ª—é–¥–µ–π).
    - –†–µ–∂–∏–º "–ë–µ–∑ —Ç–∞–π–º–µ—Ä–∞" (–¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤).

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (Go v1.25.3)

### Backend
*   **Core:** Go 1.25.3
*   **Router:** [Chi](https://github.com/go-chi/chi) ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π, –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–π —Ä–æ—É—Ç–µ—Ä.
*   **ORM:** [GORM](https://gorm.io/) ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î (–∏—Å–ø–æ–ª—å–∑—É–µ–º `AutoMigrate` –¥–ª—è MVP).
*   **Logger:** [Yagalog](https://pkg.go.dev/github.com/Chelaran/yagalog) ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
*   **WebSockets:** `gorilla/websocket` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥) ‚Äî –¥–≤–∏–∂–æ–∫ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
*   **Config:** `cleanenv` –∏–ª–∏ `viper`.

### Frontend
*   **Framework:** Next.js 15 (SPA Mode / Static Export).
*   **Language:** TypeScript.
*   **UI:** Tailwind CSS 4 + shadcn/ui.
*   **State:** Zustand (Client) + TanStack Query (Server).

### Infrastructure
*   **Database:** PostgreSQL 17 (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ).
*   **Cache/State:** Redis 7+ (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç, TTL).
*   **Storage:** MinIO (S3 Compatible) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–æ–∫.
*   **Containerization:** Docker Compose.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Standard Go Layout)

–ò—Å–ø–æ–ª—å–∑—É–µ–º `cmd/internal` –ø–∞—Ç—Ç–µ—Ä–Ω, –Ω–æ –±–µ–∑ –ª–∏—à–Ω–µ–π —Å–ª–æ–∏—Å—Ç–æ—Å—Ç–∏. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º.

```text
/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îî‚îÄ‚îÄ main.go       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DB, —Ä–æ—É—Ç–µ—Ä–∞ –∏ –∑–∞–ø—É—Å–∫
‚îÇ
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (.env)
‚îÇ   ‚îú‚îÄ‚îÄ models/           # GORM —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (User, Deck, Location)
‚îÇ   ‚îú‚îÄ‚îÄ database/         # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Postgres, Redis, MinIO
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ game/             # –ò–ì–†–û–í–û–ô –î–í–ò–ñ–û–ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hub.go        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ room.go       # –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã (—Ç–∞–π–º–µ—Ä, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, —Å—Ç–µ–π—Ç)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ client.go     # WS —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ api/              # HTTP –°–õ–û–ô
‚îÇ       ‚îú‚îÄ‚îÄ handlers/     # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (Auth, Decks, Upload)
‚îÇ       ‚îú‚îÄ‚îÄ router.go     # –ú–∞—Ä—à—Ä—É—Ç—ã Chi –∏ Middleware
‚îÇ       ‚îî‚îÄ‚îÄ server.go     # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ web/                  # Frontend (Next.js)
‚îú‚îÄ‚îÄ .env                  # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ docker-compose.yml    # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –î–∞–Ω–Ω—ã—Ö

### PostgreSQL (GORM Models)
–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (internal/models/):

```go
type User struct {
    ID           uint   `gorm:"primaryKey"`
    TgID         int64  `gorm:"uniqueIndex"`
    Username     string
    AvatarURL    string
    
    // Statistics
    GamesPlayed  int    `gorm:"default:0"`
    WinsSpy      int    `gorm:"default:0"`
    WinsLocal    int    `gorm:"default:0"`
    LossesSpy    int    `gorm:"default:0"`
    LossesLocal  int    `gorm:"default:0"`
    
    // Meta
    Decks        []Deck
    CreatedAt    time.Time
}

type GameHistory struct {
    ID        uint      `gorm:"primaryKey"`
    RoomUUID  string    // –ß—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å –ª–æ–≥–∏
    DeckName  string    // –í –∫–∞–∫—É—é –∫–æ–ª–æ–¥—É –∏–≥—Ä–∞–ª–∏
    Winner    string    // "Spy" | "Locals"
    Duration  int       // –°–µ–∫—É–Ω–¥—ã
    Players   []User    `gorm:"many2many:game_players;"`
    CreatedAt time.Time
}

type Deck struct {
    ID        uint
    AuthorID  uint
    Name      string
    IsPublic  bool       `gorm:"default:false"`
    Locations []Location `gorm:"foreignKey:DeckID"`
}

type Location struct {
    ID       uint
    DeckID   uint
    Name     string
    ImageURL string   // –°—Å—ã–ª–∫–∞ –Ω–∞ MinIO
    Roles    []string `gorm:"serializer:json"` // ["–î–æ–∫—Ç–æ—Ä", "–ú–µ–¥—Å–µ—Å—Ç—Ä–∞", ...]
}
```

### Redis (Game State)
Redis —Ö—Ä–∞–Ω–∏—Ç "–≥–æ—Ä—è—á–∏–µ" –¥–∞–Ω–Ω—ã–µ –∂–∏–≤—ã—Ö –∏–≥—Ä.

- Key: room:{uuid}
- TTL: 1 —á–∞—Å (–∞–≤—Ç–æ-–æ—á–∏—Å—Ç–∫–∞ –±—Ä–æ—à–µ–Ω–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç).
- Value: JSON Snapshot –∏–≥—Ä—ã.

```json

{
  "status": "playing",
  "timer_end": 1735567890,
  "location": { "name": "Casino", "img": "s3://..." },
  "spy_id": 12345,
  "players": [ ... ]
}
```

## üîå API & WebSocket Protocol
### HTTP Endpoints
- POST /api/auth ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è initData, –≤–æ–∑–≤—Ä–∞—Ç JWT.
- GET /api/user/me ‚Äî –ø—Ä–æ—Ñ–∏–ª—å.
- POST /api/decks ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–±–æ—Ä–∞.
- POST /api/upload ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (Multipart Form -> MinIO).

### WebSocket Events
#### Client -> Server:

1. join_room { room_id }
2. set_ready { ready: true/false }
3. vote_start { target_user_id }
4. vote_answer { vote: true/false }
5. spy_guess { location_name }
6. kick_player { target_user_id } (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –∫–æ–º–Ω–∞—Ç—ã)
7. update_room_settings { max_players?, spy_count?, duration?, deck_id? } (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –∫–æ–º–Ω–∞—Ç—ã)

#### Server -> Client:

1. joined_room { room_id, is_room_admin }
2. room_update (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –ø—Ä–∏ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏).
3. game_started (—Ç–≤–æ—è —Ä–æ–ª—å, –ª–æ–∫–∞—Ü–∏—è, –≤—Ä–µ–º—è).
4. vote_initiated (–ø–æ–ø-–∞–ø –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è).
5. game_over (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã).
6. kicked_from_room { room_id, reason }
7. room_settings_updated { room_id }
8. error { message }

## üèÅ Roadmap (MVP)
1. Infra: –ü–æ–¥–Ω—è—Ç—å docker-compose (Postgres, Redis, MinIO).
2. Auth: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏ Telegram initData.
3. Engine: –ù–∞–ø–∏—Å–∞—Ç—å Hub –∏ Room –ª–æ–≥–∏–∫—É –Ω–∞ Go.
4. Storage: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–∞—Ä—Ç–∏–Ω–æ–∫ –≤ MinIO.
5. Front: –°–≤–µ—Ä—Å—Ç–∞—Ç—å –õ–æ–±–±–∏ –∏ –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω.
